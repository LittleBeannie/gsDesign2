[{"path":"https://littlebeannie.github.io/gsDesign2/articles/check_eEvents_df.html","id":"case-1","dir":"Articles","previous_headings":"","what":"Case 1","title":"Check eEvents_df from the old version and the new version","text":"","code":"enrollRates <- tibble(duration = c(2, 1, 2), rate = c(5, 10, 20)) failRates <- tibble(duration = c(1, 1, 1),failRate = c(.05, .02, .01), dropoutRate = .01) totalDuration <- 20  x1 <- gsDesign::eEvents(lambda = failRates$failRate,                         S = failRates$duration[1 : (nrow(failRates) - 1)],                         eta = failRates$dropoutRate,                         gamma = enrollRates$rate,                         R = enrollRates$duration,                         T = totalDuration)$d  x2 <- eEvents_df_(enrollRates, failRates, totalDuration, simple = TRUE)  x3 <- eEvents_df(enrollRates, failRates, totalDuration, simple = TRUE)  tibble(method = c(\"gsDesign\", \"old version\", \"new version\"),        exp_events = c(x1, x2, x3)) %>% gt()"},{"path":"https://littlebeannie.github.io/gsDesign2/articles/check_eEvents_df.html","id":"case-2","dir":"Articles","previous_headings":"","what":"Case 2","title":"Check eEvents_df from the old version and the new version","text":"","code":"enrollRates <- tibble(duration = c(1, 1, 8), rate = c(3, 2, 0)) failRates <- tibble(duration = c(4, Inf),failRate = c(.03, .06), dropoutRate = c(.001, .002)) totalDuration <- 7  x <- eEvents_df(enrollRates, failRates, totalDuration, simple = FALSE) %>% data.frame() # expected checked with alternate calculations in gsSurvNPH vignette y <- data.frame(t = c(0, 4), failRate = c(0.03, 0.06), Events=c(0.5642911, 0.5194821))  x %>% gt() %>% tab_header(title = \"From gsDesign2 new version\") y %>% gt() %>% tab_header(title = \"From gsSurvNPH vignette\")"},{"path":"https://littlebeannie.github.io/gsDesign2/authors.html","id":null,"dir":"","previous_headings":"","what":"Authors","title":"Authors and Citation","text":"Keaven Anderson. Author, maintainer. Yujie Zhao. Author. Merck Sharp & Dohme Corp. Copyright holder.","code":""},{"path":"https://littlebeannie.github.io/gsDesign2/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Authors and Citation","text":"Anderson K, Zhao Y (2022). gsDesign2: Group sequential design non-constant effect. https://github.com/LittleBeannie/gsDesign2, https://littlebeannie.github.io/gsDesign2/.","code":"@Manual{,   title = {gsDesign2: Group sequential design with non-constant effect},   author = {Keaven Anderson and Yujie Zhao},   year = {2022},   note = {https://github.com/LittleBeannie/gsDesign2, https://littlebeannie.github.io/gsDesign2/}, }"},{"path":[]},{"path":"https://littlebeannie.github.io/gsDesign2/index.html","id":"objective","dir":"","previous_headings":"","what":"Objective","title":"Group sequential design with non-constant effect","text":"goal gsDesign2 enable fixed group sequential design non-proportional hazards. Piecewise constant enrollment, failure rates dropout rates stratified population available enable highly flexible enrollment, time--event time--dropout assumptions. Substantial flexibility top gsDesign package intended selecting boundaries. work progress, substantial capabilities enabled. Comments usability features encouraged development version package. goal gsDesign2 enable group sequential trial design time--event endpoints non-proportional hazards assumptions. package still maturing; package functions become stable, likely included gsDesign2 package.","code":""},{"path":"https://littlebeannie.github.io/gsDesign2/index.html","id":"installation","dir":"","previous_headings":"","what":"Installation","title":"Group sequential design with non-constant effect","text":"can install gsdmvn :","code":"remotes::install_github(\"LittleBeannie/gsDesign2\")"},{"path":"https://littlebeannie.github.io/gsDesign2/index.html","id":"use-cases","dir":"","previous_headings":"","what":"Use cases","title":"Group sequential design with non-constant effect","text":"…","code":""},{"path":"https://littlebeannie.github.io/gsDesign2/reference/AHR.html","id":null,"dir":"Reference","previous_headings":"","what":"Average hazard ratio under non-proportional hazards (test version) — AHR","title":"Average hazard ratio under non-proportional hazards (test version) — AHR","text":"AHR() provides geometric average hazard ratio various non-proportional hazards assumptions either single multiple strata studies. piecewise exponential distribution allows simple method specify distribution enrollment pattern enrollment, failure dropout rates changes time.","code":""},{"path":"https://littlebeannie.github.io/gsDesign2/reference/AHR.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Average hazard ratio under non-proportional hazards (test version) — AHR","text":"","code":"AHR(   enrollRates = tibble::tibble(Stratum = \"All\", duration = c(2, 2, 10), rate = c(3, 6,     9)),   failRates = tibble::tibble(Stratum = \"All\", duration = c(3, 100), failRate =     log(2)/c(9, 18), hr = c(0.9, 0.6), dropoutRate = rep(0.001, 2)),   totalDuration = 30,   ratio = 1,   simple = TRUE )"},{"path":"https://littlebeannie.github.io/gsDesign2/reference/AHR.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Average hazard ratio under non-proportional hazards (test version) — AHR","text":"enrollRates Piecewise constant enrollment rates stratum time period. failRates Piecewise constant control group failure rates, duration piecewise constant period, hazard ratio experimental vs control, dropout rates stratum time period. totalDuration Total follow-start enrollment data cutoff; can single value vector positive numbers. ratio ratio experimental control randomization. simple logical; TRUE (default), value input totalDuration overall event count, statistical information average hazard ratio given; FALSE, hazard ratio, expected events statistical information produced stratum underlying hazard ratio.","code":""},{"path":"https://littlebeannie.github.io/gsDesign2/reference/AHR.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Average hazard ratio under non-proportional hazards (test version) — AHR","text":"tibble Time (totalDuration), AHR (average hazard ratio), Events (expected number events), info (information given scenarios), info0 (information related null hypothesis) value totalDuration input; simple=FALSE, Stratum t (beginning constant HR period) also returned HR returned instead AHR","code":""},{"path":"https://littlebeannie.github.io/gsDesign2/reference/AHR.html","id":"specification","dir":"Reference","previous_headings":"","what":"Specification","title":"Average hazard ratio under non-proportional hazards (test version) — AHR","text":"contents section shown PDF user manual .","code":""},{"path":"https://littlebeannie.github.io/gsDesign2/reference/AHR.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Average hazard ratio under non-proportional hazards (test version) — AHR","text":"","code":"# Example: default AHR() #> Error in check_failRates(failRates): The `hr`column in failRates should be numeric! # Example; default with multiple analysis times (varying totalDuration) AHR(totalDuration=c(15,30)) #> Error in check_failRates(failRates): The `hr`column in failRates should be numeric! # Stratified population enrollRates <- tibble::tibble(Stratum=c(rep(\"Low\",2),rep(\"High\",3)),                               duration=c(2,10,4,4,8),                               rate=c(5,10,0,3,6) ) failRates <- tibble::tibble(Stratum=c(rep(\"Low\",2),rep(\"High\",2)),                             duration=1,                             failRate=c(.1,.2,.3,.4),                             hr=c(.9,.75,.8,.6),                             dropoutRate=.001 ) AHR(enrollRates=enrollRates,     failRates=failRates,     totalDuration=c(15,30)    ) #> Error in check_failRates(failRates): The `hr`column in failRates should be numeric! # Same example, give results by strata and time period AHR(enrollRates=enrollRates,     failRates=failRates,     totalDuration=c(15,30),     simple=FALSE ) #> Error in check_failRates(failRates): The `hr`column in failRates should be numeric!"},{"path":"https://littlebeannie.github.io/gsDesign2/reference/eEvents_df.html","id":null,"dir":"Reference","previous_headings":"","what":"Expected events observed under piecewise exponential model — eEvents_df","title":"Expected events observed under piecewise exponential model — eEvents_df","text":"eEvents_df computes expected events time strata assumption piecewise constant enrollment rates piecewise exponential failure censoring rates. piecewise exponential distribution allows simple method specify distribtuion enrollment pattern enrollment, failure dropout rates changes time. main purpose may generate trial can analyzed single point time using group sequential methods, routine can also used simulate adaptive trial design. intent enable sample size calculations non-proportional hazards assumptions stratified populations.","code":""},{"path":"https://littlebeannie.github.io/gsDesign2/reference/eEvents_df.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Expected events observed under piecewise exponential model — eEvents_df","text":"","code":"eEvents_df(   enrollRates = tibble::tibble(duration = c(2, 2, 10), rate = c(3, 6, 9)),   failRates = tibble::tibble(duration = c(3, 100), failRate = log(2)/c(9, 18),     dropoutRate = rep(0.001, 2)),   totalDuration = 25,   simple = TRUE )"},{"path":"https://littlebeannie.github.io/gsDesign2/reference/eEvents_df.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Expected events observed under piecewise exponential model — eEvents_df","text":"enrollRates Enrollment rates; see details examples failRates Failure rates dropout rates period totalDuration Total follow-start enrollment data cutoff simple default (TRUE), return numeric expected number events, otherwise tibble described .","code":""},{"path":"https://littlebeannie.github.io/gsDesign2/reference/eEvents_df.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Expected events observed under piecewise exponential model — eEvents_df","text":"default simple=TRUE return total expected number events real number. Otherwise, simple=FALSE tibble returned following variables period specified 'failRates': t start period, failRate failure rate period Events expected events period, records returned tibble correspond input tibble  failRates.","code":""},{"path":"https://littlebeannie.github.io/gsDesign2/reference/eEvents_df.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Expected events observed under piecewise exponential model — eEvents_df","text":"periods generally supplied output input. intent enable expected event calculations tidy format maximize flexibility variety purposes.","code":""},{"path":[]},{"path":"https://littlebeannie.github.io/gsDesign2/reference/eEvents_df.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Expected events observed under piecewise exponential model — eEvents_df","text":"","code":"library(tibble) # Default arguments, simple output (total event count only) eEvents_df() #> [1] 57.3537 # Event count by time period eEvents_df(simple=FALSE) #> # A tibble: 2 × 3 #>       t failRate Events #>   <dbl>    <dbl>  <dbl> #> 1     0   0.0770   22.2 #> 2     3   0.0385   35.1 # Early cutoff eEvents_df(totalDuration=.5) #> [1] 0.02850923 # Single time period example eEvents_df(enrollRates=tibble(duration=10,rate=10),            failRates=tibble(duration=100,failRate=log(2)/6,dropoutRate=.01),            totalDuration=22,            simple=FALSE            ) #> # A tibble: 1 × 3 #>       t failRate Events #>   <dbl>    <dbl>  <dbl> #> 1     0    0.116   80.4 # Single time period example, multiple enrolment periods eEvents_df(enrollRates=tibble(duration=c(5,5), rate=c(10,20)),            failRates=tibble(duration=100,failRate=log(2)/6,dropoutRate=.01),            totalDuration=22,            simple=FALSE            ) #> # A tibble: 1 × 3 #>       t failRate Events #>   <dbl>    <dbl>  <dbl> #> 1     0    0.116   119."},{"path":"https://littlebeannie.github.io/gsDesign2/reference/gridpts.html","id":null,"dir":"Reference","previous_headings":"","what":"Grid points for group sequential design numerical integration — gridpts","title":"Grid points for group sequential design numerical integration — gridpts","text":"Points weights Simpson's rule numerical integration p 349 - 350 Jennison Turnbull book. used arbitrary integration, canonical form Jennison Turnbull. mu computed elsewhere drift parameter times sqrt information. Since lower-level routine, checking input done; calling routines ensure input correct. Lower limit integration can -Inf upper limit integration can Inf","code":""},{"path":"https://littlebeannie.github.io/gsDesign2/reference/gridpts.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Grid points for group sequential design numerical integration — gridpts","text":"","code":"gridpts(r = 18, mu = 0, a = -Inf, b = Inf)"},{"path":"https://littlebeannie.github.io/gsDesign2/reference/gridpts.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Grid points for group sequential design numerical integration — gridpts","text":"r Integer, least 2; default 18 recommended Jennison Turnbull mu Mean normal distribution (scalar) consideration lower limit integration (scalar) b upper limit integration (scalar > )","code":""},{"path":"https://littlebeannie.github.io/gsDesign2/reference/gridpts.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Grid points for group sequential design numerical integration — gridpts","text":"list grid points z numerical integration weights w","code":""},{"path":"https://littlebeannie.github.io/gsDesign2/reference/gridpts.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Grid points for group sequential design numerical integration — gridpts","text":"Jennison Turnbull (p 350) claim accuracy 10E-6 r=16. numerical integration grid spreads tail enable accurate tail probability calcuations.","code":""},{"path":"https://littlebeannie.github.io/gsDesign2/reference/gridpts.html","id":"specification","dir":"Reference","previous_headings":"","what":"Specification","title":"Grid points for group sequential design numerical integration — gridpts","text":"contents section shown PDF user manual .","code":""},{"path":"https://littlebeannie.github.io/gsDesign2/reference/gridpts.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Grid points for group sequential design numerical integration — gridpts","text":"","code":"# approximate variance of standard normal (i.e., 1) g <- gridpts() #> Error in .gridptsRcpp(r = r, mu = mu, a = a, b = b): object '_gsdmvn_gridptsRcpp' not found sum((g$z)^2 * g$w * dnorm(g$z)) #> Error in eval(expr, envir, enclos): object 'g' not found  # approximate probability above .95 quantile (i.e., .05) g <- gridpts(a = qnorm(.95), b = Inf) #> Error in .gridptsRcpp(r = r, mu = mu, a = a, b = b): object '_gsdmvn_gridptsRcpp' not found sum(g$w * dnorm(g$z)) #> Error in eval(expr, envir, enclos): object 'g' not found"},{"path":"https://littlebeannie.github.io/gsDesign2/reference/gs_info_ahr.html","id":null,"dir":"Reference","previous_headings":"","what":"Information and effect size based on AHR approximation — gs_info_ahr","title":"Information and effect size based on AHR approximation — gs_info_ahr","text":"Based piecewise enrollment rate, failure rate, dropout rates computes approximate information effect size using average hazard ratio model.","code":""},{"path":"https://littlebeannie.github.io/gsDesign2/reference/gs_info_ahr.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Information and effect size based on AHR approximation — gs_info_ahr","text":"","code":"gs_info_ahr(   enrollRates = tibble::tibble(Stratum = \"All\", duration = c(2, 2, 10), rate = c(3, 6,     9)),   failRates = tibble::tibble(Stratum = \"All\", duration = c(3, 100), failRate =     log(2)/c(9, 18), hr = c(0.9, 0.6), dropoutRate = rep(0.001, 2)),   ratio = 1,   events = NULL,   analysisTimes = NULL )"},{"path":"https://littlebeannie.github.io/gsDesign2/reference/gs_info_ahr.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Information and effect size based on AHR approximation — gs_info_ahr","text":"enrollRates enrollment rates failRates failure dropout rates ratio Experimental:Control randomization ratio events Targeted minimum events analysis analysisTimes Targeted minimum study duration analysis","code":""},{"path":"https://littlebeannie.github.io/gsDesign2/reference/gs_info_ahr.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Information and effect size based on AHR approximation — gs_info_ahr","text":"tibble columns Analysis, Time, AHR, Events, theta, info, info0. info, info0 contains statistical information H1, H0, respectively. analysis k, Time[k] maximum analysisTimes[k] expected time required accrue targeted events[k]. AHR expected average hazard ratio analysis.","code":""},{"path":"https://littlebeannie.github.io/gsDesign2/reference/gs_info_ahr.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Information and effect size based on AHR approximation — gs_info_ahr","text":"AHR() function computes statistical information targeted event times. tEvents() function used get events average HR targeted analysisTimes.","code":""},{"path":"https://littlebeannie.github.io/gsDesign2/reference/gs_info_ahr.html","id":"specification","dir":"Reference","previous_headings":"","what":"Specification","title":"Information and effect size based on AHR approximation — gs_info_ahr","text":"contents section shown PDF user manual .","code":""},{"path":"https://littlebeannie.github.io/gsDesign2/reference/gs_info_ahr.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Information and effect size based on AHR approximation — gs_info_ahr","text":"","code":"library(gsDesign) #> Loading required package: ggplot2 library(gsDesign2)  # Only put in targeted events gs_info_ahr(events = c(30, 40, 50)) #> Error: 'tEvents' is not an exported object from 'namespace:gsDesign2' # Only put in targeted analysis times gs_info_ahr(analysisTimes = c(18, 27, 36)) #> Error in check_failRates(failRates): The `hr`column in failRates should be numeric! # Some analysis times after time at which targeted events accrue # Check that both Time >= input analysisTime and Events >= input events gs_info_ahr(events = c(30, 40, 50), analysisTimes = c(16, 19, 26)) #> Error in check_failRates(failRates): The `hr`column in failRates should be numeric! gs_info_ahr(events = c(30, 40, 50), analysisTimes = c(14, 20, 24)) #> Error in check_failRates(failRates): The `hr`column in failRates should be numeric!"},{"path":"https://littlebeannie.github.io/gsDesign2/reference/h1.html","id":null,"dir":"Reference","previous_headings":"","what":"Initialize numerical integration for group sequential design — h1","title":"Initialize numerical integration for group sequential design — h1","text":"Compute grid points first interim analysis group sequential design","code":""},{"path":"https://littlebeannie.github.io/gsDesign2/reference/h1.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Initialize numerical integration for group sequential design — h1","text":"","code":"h1(r = 18, theta = 0, I = 1, a = -Inf, b = Inf)"},{"path":"https://littlebeannie.github.io/gsDesign2/reference/h1.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Initialize numerical integration for group sequential design — h1","text":"r Integer, least 2; default 18 recommended Jennison Turnbull theta Drift parameter first analysis Information first analysis lower limit integration (scalar) b upper limit integration (scalar > )","code":""},{"path":"https://littlebeannie.github.io/gsDesign2/reference/h1.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Initialize numerical integration for group sequential design — h1","text":"list grid points z, numerical integration weights w, normal density mean mu = theta * sqrt{} variance 1 times weight w.","code":""},{"path":"https://littlebeannie.github.io/gsDesign2/reference/h1.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Initialize numerical integration for group sequential design — h1","text":"Mean standard normal distribution consideration mu = theta * sqrt()","code":""},{"path":"https://littlebeannie.github.io/gsDesign2/reference/h1.html","id":"specification","dir":"Reference","previous_headings":"","what":"Specification","title":"Initialize numerical integration for group sequential design — h1","text":"contents section shown PDF user manual .","code":""},{"path":"https://littlebeannie.github.io/gsDesign2/reference/h1.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Initialize numerical integration for group sequential design — h1","text":"","code":"# Replicate variance of 1, mean of 35 g <- h1(theta = 5, I = 49) #> Error in .h1Rcpp(r = r, theta = theta, I = I, a = a, b = b): object '_gsdmvn_h1Rcpp' not found mu <- sum(g$z * g$h) #> Error in eval(expr, envir, enclos): object 'g' not found var <- sum((g$z - mu)^2 * g$h) #> Error in eval(expr, envir, enclos): object 'g' not found  # Replicate p-value of .0001 by numerical integration of tail g <- h1(a = qnorm(.9999)) #> Error in .h1Rcpp(r = r, theta = theta, I = I, a = a, b = b): object '_gsdmvn_h1Rcpp' not found sum(g$h) #> Error in eval(expr, envir, enclos): object 'g' not found"},{"path":"https://littlebeannie.github.io/gsDesign2/reference/hupdate.html","id":null,"dir":"Reference","previous_headings":"","what":"Update numerical integration for group sequential design — hupdate","title":"Update numerical integration for group sequential design — hupdate","text":"Update grid points numerical integration one analysis next","code":""},{"path":"https://littlebeannie.github.io/gsDesign2/reference/hupdate.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Update numerical integration for group sequential design — hupdate","text":"","code":"hupdate(   r = 18,   theta = 0,   I = 2,   a = -Inf,   b = Inf,   thetam1 = 0,   Im1 = 1,   gm1 = h1() )"},{"path":"https://littlebeannie.github.io/gsDesign2/reference/hupdate.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Update numerical integration for group sequential design — hupdate","text":"r Integer, least 2; default 18 recommended Jennison Turnbull theta Drift parameter current analysis Information current analysis lower limit integration (scalar) b upper limit integration (scalar > ) thetam1 Drift parameter previous analysis Im1 Information previous analysis gm1 numerical integration grid h1() previous run hupdate()","code":""},{"path":"https://littlebeannie.github.io/gsDesign2/reference/hupdate.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Update numerical integration for group sequential design — hupdate","text":"list grid points z, numerical integration weights w, normal density mean mu = theta * sqrt{} variance 1 times weight w.","code":""},{"path":"https://littlebeannie.github.io/gsDesign2/reference/hupdate.html","id":"specification","dir":"Reference","previous_headings":"","what":"Specification","title":"Update numerical integration for group sequential design — hupdate","text":"contents section shown PDF user manual .","code":""},{"path":"https://littlebeannie.github.io/gsDesign2/reference/hupdate.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Update numerical integration for group sequential design — hupdate","text":"","code":"# 2nd analysis with no interim bound and drift 0 should have mean 0, variance 1 g <- hupdate() #> Error in .hupdateRcpp(r = r, theta = theta, I = I, a = a, b = b, thetam1 = thetam1,     Im1 = Im1, gm1 = gm1): object '_gsdmvn_hupdateRcpp' not found mu <- sum(g$z * g$h) #> Error in eval(expr, envir, enclos): object 'g' not found var <- sum((g$z - mu)^2 * g$h) #> Error in eval(expr, envir, enclos): object 'g' not found"}]
